<div [@routerTransition] >
    <app-page-header [heading]="'Fluxo de Caixa (Operacional)'" [icon]="'fa-desktop'"></app-page-header>
    <!--<div class="row">
            <div class="col col-sm-12">
                <div class="card mb-3">
                    <div class="card-header">
                        Fluxo de Caixa Diário
                    </div>
                    <div class="card-body">
                        <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [legend]="barChartLegend" [chartType]="barChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                        </canvas>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-info btn-sm" (click)="randomize()">Update</button>
                    </div>
                </div>
            </div>
        </div>-->
    <div class="row">
        <div class="col-lg-4">
            <div class="card mb-3">
                <div class="card-header">Data de Início</div>
                    <div class="card-body">
                        <form class="form-inline mb-3">
                            <div class="form-group">
                                <div class="input-group datepicker-input">
                                    <input class="form-control" placeholder="yyyy-mm-dd"
                                            name="dp" [(ngModel)]="data_inicio" ngbDatepicker #d="ngbDatepicker">
                                    <button class="input-group-addon" (click)="d.toggle()" type="button">
                                        <!-- <img src="img/calendar-icon.svg" style="width: 1.2rem; height: 1rem; cursor: pointer;"/> -->
                                        <span class="fa fa-calendar"></span>
                                    </button>
                                    </div>
                                </div>
                            </form>
                        </div>
            </div>
        </div>
        <div class="col-lg-4">
                <div class="card mb-3">
                    <div class="card-header">Data de Fim</div>
                        <div class="card-body">
                            <form class="form-inline mb-3">
                                <div class="form-group">
                                    <div class="input-group datepicker-input">
                                        <input class="form-control" placeholder="yyyy-mm-dd"
                                                name="dp" [(ngModel)]="data_fim" ngbDatepicker #dx="ngbDatepicker">
                                        <button class="input-group-addon" (click)="dx.toggle()" type="button">
                                            <!-- <img src="img/calendar-icon.svg" style="width: 1.2rem; height: 1rem; cursor: pointer;"/> -->
                                            <span class="fa fa-calendar"></span>
                                        </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card mb-3">
                <div class="card-header">Modo Despesa</div>
                    <div class="card-body">
                        <form class="form-inline mb-3">
                            <div class="form-group">
                                <select class="form-control" id="exampleFormControlSelect1" [(ngModel)]="modo_despesa">
                                    <option value="0"></option>
                                    <option value="1">Despesas Pagas</option>
                                    <option value="2">Despesas a Pagar</option>
                                </select>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
    </div>
    <div class="row mb-3">
        <div class="col col-sm-6">
            <button type="button" class="btn btn-primary" (click)="gerar();">Concluir</button>
        </div>
    </div>

    <div class="row" *ngIf="!hide">
        <div class="col col-sm-6">
            <div class="card mb-3">
                <div class="card-header">Fluxo de Caixa</div>
                <div class="card-body">
                    <canvas baseChart [datasets]="barChartDataFluxo" [labels]="barChartLabelsFluxo" [options]="barChartOptionsFluxo" [legend]="barChartLegendFluxo" [chartType]="barChartTypeFluxo" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                    </canvas>
                </div>
                <div class="card-footer">
                    <button class="btn btn-info btn-sm" (click)="randomize()">Update</button>
                </div>
            </div>
        </div>
        <div class="col col-sm-6">
            <div class="card mb-3">
                <div class="card-header">Despesas por Setor</div>
                <div class="card-body">
                    <canvas baseChart height="150px" [data]="pieChartData" [labels]="pieChartLabels" [chartType]="pieChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                    </canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="!hide">
        <div class="col col-sm-12">
            <div class="card mb-3">
                <div class="card-header">Margem de Lucror</div>
                <div class="card-body">
                    <canvas baseChart height="150px" [data]="pieChartDataMargem" [labels]="pieChartLabelsMargem" [chartType]="pieChartTypeMargem" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                    </canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="hide">
            <div class="col col-sm-6">
                <div class="card mb-3">
                    <div class="card-header">Despesas a Pagar</div>
                    <div class="card-body">
                        <canvas baseChart [datasets]="barChartDataPagar" [labels]="barChartLabelsPagar" [options]="barChartOptionsPagar" [legend]="barChartLegendPagar" [chartType]="barChartTypePagar" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                        </canvas>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-info btn-sm" (click)="randomize()">Update</button>
                    </div>
                </div>
            </div>
            <div class="col col-sm-6">
                <div class="card mb-3">
                    <div class="card-header">Valor em Caixa</div>
                        <div class="card-body">
                            <canvas baseChart [datasets]="barChartDataCaixa" [labels]="barChartLabelsCaixa" [options]="barChartOptionsCaixa" [legend]="barChartLegendCaixa" [chartType]="barChartTypeCaixa" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                            </canvas>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-info btn-sm" (click)="randomize()">Update</button>
                        </div>
                </div>
            </div>
        </div>
    <div class="row">
        <div class="col col-sm-12">
                <h6>Contas a Pagar</h6>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Nome do Cliente</th>
                        <th scope="col">Descrição</th>
                        <th scope="col">Setor</th>
                        <th scope="col">Data de Pagamento</th>
                        <th scope="col">Observação 1</th>
                        <th scope="col">Observação 2</th>
                    </tr>
                    </thead>
                    <tbody *ngFor="let item of despesas">
                    <tr>
                        <td >{{item.nome}}</td>
                        <td>{{item.descricao}}</td>
                        <td>{{item.setor}}</td>
                        <td>{{item.data_registro | date:'dd-MM-yyyy'}}</td>
                        <td>{{item.observacao1}}</td>
                        <td>{{item.observacao2}}</td>
                    </tr>
                    </tbody>
              </table>
              <nav aria-label="Page navigation example">
                <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
                    <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                        <a class="page-link" (click)="setPageDespesa(1)">First</a>
                    </li>
                    <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                        <a class="page-link" (click)="setPageDespesa(pager.currentPage - 1)">Previous</a>
                    </li>
                    <li class="page-item" *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                        <a class="page-link" (click)="setPageDespesa(page)">{{page}}</a>
                    </li>
                    <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                        <a class="page-link" (click)="setPageDespesa(pager.currentPage + 1)">Next</a>
                    </li>
                    <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                        <a class="page-link" (click)="setPageDespesa(pager.totalPages)">Last</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="col col-sm-12">
            <h6>Receitas</h6>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Nome do Cliente</th>
                    <th scope="col">Descrição</th>
                    <th scope="col">Setor</th>
                    <th scope="col">Data de Registro</th>
                    <th scope="col">Observação 1</th>
                    <th scope="col">Observação 2</th>
                </tr>
                </thead>
                <tbody *ngFor="let item of receitas">
                <tr>
                    <td >{{item.nome}}</td>
                    <td>{{item.descricao}}</td>
                    <td>{{item.setor}}</td>
                    <td>{{item.data_registro | date:'dd-MM-yyyy'}}</td>
                    <td>{{item.observacao1}}</td>
                    <td>{{item.observacao2}}</td>
                </tr>
                </tbody>
          </table>
          <nav aria-label="Page navigation example">
            <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
                <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                    <a class="page-link" (click)="setPageReceita(1)">First</a>
                </li>
                <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                    <a class="page-link" (click)="setPageReceita(pager.currentPage - 1)">Previous</a>
                </li>
                <li class="page-item" *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                    <a class="page-link" (click)="setPageReceita(page)">{{page}}</a>
                </li>
                <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                    <a class="page-link" (click)="setPageReceita(pager.currentPage + 1)">Next</a>
                </li>
                <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                    <a class="page-link" (click)="setPageReceita(pager.totalPages)">Last</a>
                </li>
            </ul>
        </nav>
    </div>
    </div>
</div>
